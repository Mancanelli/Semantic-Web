%%%% tikz-er2
\NeedsTeXFormat{LaTeX2e}
\ProvidesPackage{tikz-er2}[2009/01/31 Entity-relationship diagrams using the Tikz library]

\RequirePackage{tikz}
\RequirePackage[normalem]{ulem}  % for the dashed underline

\usetikzlibrary{shapes.geometric}
\usetikzlibrary{arrows}
\usetikzlibrary{matrix}
\usetikzlibrary{chains}
\usetikzlibrary{fit}
\usetikzlibrary{positioning}
\usetikzlibrary{decorations.pathreplacing}
\usetikzlibrary{shadows}
\usetikzlibrary{automata}

\tikzstyle{every entity} = [top color=white, bottom color=blue!30, draw=blue!50!black!100]
\tikzstyle{every weak entity} = [drop shadow={shadow xshift=.7ex, shadow yshift=-.7ex}]
\tikzstyle{every attribute} = [top color=white, bottom color=yellow!20, draw=yellow, node distance=7em, drop shadow]
\tikzstyle{every relationship} = [top color=white, bottom color=red!20, draw=red!50!black!100]
\tikzstyle{every isa} = [top color=white, bottom color=green!20, draw=green!50!black!100]
\tikzstyle{every document} = []

\tikzstyle{link} = [>=triangle 60, draw, thick]%, every link]
\tikzstyle{total} = [link, double, double distance=3pt]
\tikzstyle{entity} = [rectangle, draw, black, thick, minimum width=6em, minimum height=3em, every entity]
\tikzstyle{document} = [chamfered rectangle, draw, black, very thick, minimum width=6em, minimum height=3em, every entity, chamfered rectangle corners=north east]
\tikzstyle{weak entity} = [entity, double, double distance=2pt, every weak entity]
\tikzstyle{attribute} = [ellipse, draw, black, very thick, every attribute]%, minimum width=5em, minimum height=2em, every attribute]

%\tikzstyle{key attribute} = [attribute, font=\bfseries]
\tikzstyle{multi attribute} = [attribute, double, double distance=2pt]
\tikzstyle{derived attribute} = [attribute, dashed]

%\tikzstyle{discriminator} = [attribute, font=\itshape]
\tikzstyle{relationship} = [diamond, draw, black, very thick, minimum width=2em, aspect=1, every relationship]
\tikzstyle{ident relationship} = [relationship, double, double distance=2pt]
\tikzstyle{isa} = [isosceles triangle, isosceles triangle apex angle=60, shape border rotate=-90, draw, black, very thick, minimum size=0.5em, every isa]

% for text un key attributes
\newcommand{\key}[1]{\underline{#1}}

% for text in discriminator attributes
%\def\discriminator{\bgroup
%  \ifdim\ULdepth=\maxdimen  % Set depth based on font, if not set already
%   \settodepth\ULdepth{(j}\advance\ULdepth.4pt\fi
%  \markoverwith{\kern.15em
%  \vtop{\kern\ULdepth \hrule width .3em}%
%  \kern.15em}\ULon}
